"use strict";const validateForm=document.forms.feedback;async function formSend(t){if(t.preventDefault(),0===function(e){let t=0;const a=e.querySelectorAll(".required");return a.forEach(e=>{e.classList.contains("contact__email")?/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)||(e.classList.add("invalid"),e.nextElementSibling.innerHTML="Please, enter correct email",t++):""===e.value&&(e.classList.add("invalid"),e.nextElementSibling.innerHTML="This field is empty",t++)}),t}(validateForm)){t=await fetch("https://my-json-server.typicode.com/v-r-savka/json/posts/",{method:"POST",body:new FormData(validateForm)});for(let e=0;e<4;e++)validateForm[e].value="";if(200<=t.status&&t.status<=300){let e=document.createElement("div");e.setAttribute("id","message--success"),e.innerHTML="Message sent successfully",validateForm.after(e),setTimeout(function(){document.getElementById("message--success").remove()},5e3)}else{let e=document.createElement("div");switch(e.setAttribute("id","message--error"),t.status){case 400:e.innerHTML=`Bad Request
               please try again later`;break;case 403:e.innerHTML=`Forbidden
               please try again later`;break;case 404:e.innerHTML=`Not Found
               please try again later`;break;case 500:e.innerHTML=`Internal Server Error
               please try again later`;break;case 503:e.innerHTML=`Service Unavailable
               please try again later`;break;case 504:e.innerHTML=`Gateway Timeout
               please try again later`;break;default:e.innerHTML=`Message isn't send, 
               please try again later`}validateForm.after(e),setTimeout(function(){document.getElementById("message--error").remove()},5e3)}}}function deleteErrorOnFocus(){for(const e of validateForm.elements)e.addEventListener("focus",function(){this.classList.contains("invalid")&&(this.classList.remove("invalid"),this.nextElementSibling.innerHTML="")})}function drawGraph(){const e=document.querySelectorAll(".about__canvas");var t=document.querySelector(".parallax"),a=document.querySelector(".about");t.clientHeight===a.offsetTop&&e.forEach(e=>{let s=0,o;const t=e,l=t.getContext("2d"),c=t.width/2,d=t.height/2,m=1.5*Math.PI,u=parseInt(t.previousElementSibling.innerHTML);window.removeEventListener("scroll",drawGraph),o=setInterval(()=>{var e,t,a,n,i=(1.5+2*s/100)*Math.PI,r=Math.abs(s-1)+"%";l.beginPath(),l.arc(c,d,100,m,i,!1),l.lineWidth=12,l.strokeStyle="#f2c351",l.stroke(),e=105,t=140,a=r.length,n=24,i=20,l.clearRect(e,t-n,i*a,n),i=105,a=140,n=r,(r=l).font="30px Arial",r.fillStyle="grey",r.fillText(n,i,a),s>u&&clearInterval(o),s++},50)})}validateForm.addEventListener("submit",formSend),deleteErrorOnFocus(),window.addEventListener("scroll",drawGraph);const header=document.getElementById("header");function onScroll(){0<window.pageYOffset?header.classList.add("active"):0===window.pageYOffset&&header.classList.remove("active")}window.addEventListener("scroll",onScroll);const animItems=document.querySelectorAll(".anim-items");function checkItems(){const t=window.innerHeight/5*4;animItems.forEach(e=>{e.getBoundingClientRect().top<t?e.classList.add("active"):e.classList.contains("anim-no-hide")||e.classList.remove("active")})}window.addEventListener("scroll",checkItems),checkItems();const smoothLinks=document.querySelectorAll('a[href^="#"]');smoothLinks.forEach(a=>{a.addEventListener("click",function(e){e.preventDefault();const t=document.getElementsByClassName("header__navigation");e=a.getAttribute("href"),e=document.querySelector(e);t[0].classList.toggle("header__navigation--active"),window.scrollBy({top:e.offsetTop,behavior:"smooth"})})});const paralaxBtns=document.querySelectorAll(".parallax__btn");paralaxBtns.forEach(t=>{t.addEventListener("click",function(e){e.preventDefault();e=t.firstElementChild.getAttribute("href"),e=document.querySelector(e);window.scrollBy({top:e.offsetTop,behavior:"smooth"})})});const navigation=document.querySelectorAll(".header__navigation"),parallax=document.getElementById("parallax");function showNavbar(){const e=document.getElementsByClassName("header__burger");e[0].addEventListener("click",function(){navigation[0].classList.remove("header__navigation--hide"),navigation[0].classList.toggle("header__navigation--active")})}parallax.addEventListener("click",()=>{navigation[0].classList.contains("header__navigation--active")&&(navigation[0].classList.remove("header__navigation--active"),navigation[0].classList.add("header__navigation--hide"))}),showNavbar();